<!--用户信息--> <!--XEP-0077-->
<!--1,获取用户信息-->
<!--REQ-->
<iq from='flaght@gmail.com/miglab' 
  id='v1'
  type='get'>
  <vCard xmlns='vcard-temp'/>
</iq>

<!--ACK-->
<iq id='v1'
  to = 'flaght@gmail.com'
  type='result'>
  <vCard xmlns="’vcard-temp’">
    <id>10001</id>
    <sex>1</sex>
    <address>
      <extadd>suite 600</extadd>
      <street>1899 west lake street</street>
      <locality>hangzhou</locality>
      <region>west lake</region>
      <pcode>310000</pcode>
      <ctry>China</ctry>
    </address>
    <head>http://fm.miglab.com/10001.jpg</head>
    <birthday>1986-09-03</birthday>
    <nickname>kerry</nickname>
  </vCard>
</iq>

<!--用户不存在-->
<iq id='v1'
    to='flaght@gmail.com/miglab'
    type='result'>
  <vCard xmlns='vcard-temp'/>
</iq>

<!--2,更新用户信息-->
<!--Req-->
<iq id='v2' type='set'>
  <vCard xmlns='vcard-temp'>
    <id>10001</id>
    <sex>1</sex>
    <address>
      <extadd>suite 600</extadd>
      <street>1899 west lake street</street>
      <locality>hangzhou</locality>
      <region>west lake</region>
      <pcode>310000</pcode>
      <ctry>China</ctry>
    </address>
    <head>http://fm.miglab.com/10001.jpg</head>
    <birthday>1986-09-03</birthday>
    <nickname>kerry</nickname>
  </vCard>
</iq>

<!--ACK-->
<iq id='v2'
    to='flaght@gmail.com/miglab'
    type='result'/>

<!--用户注册 -->
<!-- req需要注册哪些字段-->
<iq type='get' id='v1'>
  <query xmlns='jabber:iq:register'/>
</iq>

<!--ACK返回注册的字段-->
<iq type='result' id='v1'>
  <query xmlns='jabber:iq:register'>
    <instructions>
      Choose a sex and password for use with this service.
      Please also provide your email address.
    </instructions>
    <usrname/>
    <sex/>
    <password/>
    <address>
      <extadd/>
      <street/>
      <locality/>
      <region/>
      <pcode/>
      <ctry/>
    </address>
    <head/>
    <birthday/>
    <nickname/>
  </query>
</iq>

<!--REQ提交注册信息-->
<iq type='set' id='v2'>
  <query xmlns ='jabber:iq:register'>
    <usrname>flaght@gmail.com</usrname>
    <sex>1</sex>
    <password>123456</password>
    <address>
      <extadd>suite 600</extadd>
      <street>1899 west lake street</street>
      <locality>hangzhou</locality>
      <region>west lake</region>
      <pcode>310000</pcode>
      <ctry>China</ctry>
    </address>
    <head>http://fm.miglab.com/10001.jpg</head>
    <birthday>1986-09-03</birthday>
    <nickname>kerry</nickname>
  </query>
</iq>

<!--ACK注册成功-->
<iq type='result' id='v2'/>

<!--ACK注册失败 (用户名冲突)-->
<iq type='error' id='v2'>
  <query xmlns='jabber:iq:register'>
    <usrname>flaght@gmail.com</usrname>
    <password>123456</password>
  </query>
  <error code='409' type='cancel'>
    <conflict xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>
  </error>
</iq>

<!--ACK注册失败 (一些必需的信息未提供)-->
<iq type='error' id='v2'>
  <query xmlns='jabber:iq:register'>
    <usrname>flaght@gmail.com</usrname>
    <password>123456</password>
  </query>
  <error code='406'
</iq>

<!--注销账号-->
<!--REQ-->
<iq type='set' from='flaght@gmail.com/miglab' id='v1'>
  <query xmlns='jabber:iq:register'>
    <remove/>
  </query>
</iq>

<!--ACK 注销成功-->
<iq type='result' to ='flaght@gmail.com/miglab' id='v1'/>

<!--ACK 注销失败-->
<!--请求错误-->
<iq type='error' from='migfmserver@miglab.com' to='flaght@gmail.com/miglab' id='v1'>
  <error code ='400' type ='modify'>
    <bad-request xmlns ='urn:ietf:params:xml:ns:xmpp-stanzas'/>
  </error>
</iq>

<!-- 发送者没有足够的权限取消注册-->
<iq type='error' from ='migfmserver@miglab.com' to='flaght@gmail.com/miglab' id='v1'>
  <error code='401' type='cancel'>
    <forbidden xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>
  </error>
</iq>

<!--用户注销失败-->
<iq type='error' from='migfmserver@miglab.com' to='flaght@gmail.com/miglab' id='v1'>
  <error code='405' type='cancel'>
    <not-allowed xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>
  </error>
</iq>

<!--修改密码-->
<!--REQ 如果不是加密流 禁止修改密码 密码不能为空值-->
<iq type='set' to='migfmserver@miglab.com' id='v1'>
  <query xmlns='jabber:iq:register'>
    <username>flaght@gmail.com</username>
    <password>123456</password>
  </query>
</iq>

<!--ACK 密码修改成功-->
<iq type='result' id='v1'/>

<!--ACK 请求错误-->
<iq type='error' from='migfmserver@miglab.com' to='flaght@gmail.com/miglab' id='v1'>
  <error code='400' type='modify'>
    <bad-request xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>
  </error>
</iq>

<!--ACK 未授权不确定是否足够安全-->
<iq type='error' from='migfmserver@miglab.com' to='flaght@gmail.com/miglab' id='v1'>
  <error code='401' type='modify'>
    <not-authorized xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>
  </error>
</iq>

<!--ACK 不允许密码变更-->
<iq type='error' from='migfmserver@miglab.com' to='flaght@gmail.com/miglab' id='v1'>
  <error code='405' type='modify'>
    <not-allowed xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>
  </error>
</iq>
